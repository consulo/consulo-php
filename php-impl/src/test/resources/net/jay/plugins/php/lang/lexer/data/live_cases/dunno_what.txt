<?php
function htmlToText($html)
{
  $nohtml =
    preg_replace("/<br.*?>/i", "\n",
      preg_replace("/<title.*?>(.*?)<\/title>/", "$1\n\r",
        preg_replace("/<hr.*?>/i", "\n\r===================\n\r",
          preg_replace("/^\s+/im", "",
            preg_replace("/\s+/i", " ",
              str_replace("<li>", "<br>  *  ",
                preg_replace( '/&.*?;/', '#',
                  preg_replace( '/<a(.*?)href=(\"|\'|)([^\"\' ]*)([^>]*)>(.*?)<\/a>/i', '$5 ( $3 )',
                    preg_replace( '/<a([^>]*)><img([^>]*)><\/a>/i', '',
                      preg_replace( '/<style>.*?<\/style>/i', '',
                        preg_replace( '/&(quot|laquo|raquo|\#0?147|\#0?148);/', '"', //"
                          preg_replace( '/&(ndash|\#0?150);/', '-',
                            preg_replace( '/&(mdash|\#0?151);/', '--',
                              preg_replace( '/&nbsp;/', ' ', $html )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    );
}
?>
---------------------
php opening tag('<?php\n')
function('function')
identifier('htmlToText')
(('(')
variable('$html')
)(')')
{('{')
variable('$nohtml')
assign('=')
identifier('preg_replace')
(('(')
string('"/<br.*?>/i"')
comma(',')
string('"\n"')
comma(',')
identifier('preg_replace')
(('(')
string('"/<title.*?>(.*?)<\/title>/"')
comma(',')
string('"$1\n\r"')
comma(',')
identifier('preg_replace')
(('(')
string('"/<hr.*?>/i"')
comma(',')
string('"\n\r===================\n\r"')
comma(',')
identifier('preg_replace')
(('(')
string('"/^\s+/im"')
comma(',')
string('""')
comma(',')
identifier('preg_replace')
(('(')
string('"/\s+/i"')
comma(',')
string('" "')
comma(',')
identifier('str_replace')
(('(')
string('"<li>"')
comma(',')
string('"<br>  *  "')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/&.*?;/'')
comma(',')
single quoted string(''#'')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/<a(.*?)href=(\"|\'|)([^\"\' ]*)([^>]*)>(.*?)<\/a>/i'')
comma(',')
single quoted string(''$5 ( $3 )'')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/<a([^>]*)><img([^>]*)><\/a>/i'')
comma(',')
single quoted string('''')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/<style>.*?<\/style>/i'')
comma(',')
single quoted string('''')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/&(quot|laquo|raquo|\#0?147|\#0?148);/'')
comma(',')
single quoted string(''"'')
comma(',')
line comment('//"')
identifier('preg_replace')
(('(')
single quoted string(''/&(ndash|\#0?150);/'')
comma(',')
single quoted string(''-'')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/&(mdash|\#0?151);/'')
comma(',')
single quoted string(''--'')
comma(',')
identifier('preg_replace')
(('(')
single quoted string(''/&nbsp;/'')
comma(',')
single quoted string('' '')
comma(',')
variable('$html')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
)(')')
semicolon(';')
}('}')
php closing tag('?>')